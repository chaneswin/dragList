<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡å­—æ‹–æ›³æ’åºå·¥å…·</title>
    <!-- å¼•ç”¨ SortableJS å‡½å¼åº«ï¼Œè®“æ‹–æ›³è®Šå¾—è¶…ç´šç°¡å–® -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <!-- ä½¿ç”¨ QR ç¢¼ API ç”Ÿæˆ QR ç¢¼ -->
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #FCFEFF;
            color: #000000;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            margin: 0;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 1200px;
            background: #FFFFFF;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #213357;
            margin: 0 0 15px 0;
            font-size: 1.5em;
        }
        h2 {
            text-align: center;
            color: #213357;
            margin: 10px 0 8px 0;
            font-size: 1.1em;
        }
        .main-content {
            display: flex;
            gap: 20px;
            align-items: stretch;
            min-height: 500px;
        }
        .input-section {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }
        .sort-section {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }
        .input-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        textarea {
            width: 100%;
            flex: 1;
            min-height: 300px;
            padding: 10px;
            border: 1px solid #808080;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 10px;
            resize: vertical;
            font-family: inherit;
            line-height: 1.5;
        }
        button {
            display: block;
            width: 100%;
            padding: 8px;
            font-size: 14px;
            font-weight: bold;
            color: #fff;
            background-color: #005A87;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
            box-shadow: 0 6px 14px rgba(33, 51, 87, 0.18);
        }
        button:hover {
            background-color: #213357;
        }
        button:active {
            transform: scale(0.98);
        }
        hr {
            margin: 12px 0;
            border: 1px solid rgba(58, 58, 58, 0.15);
        }
        #sortable-list {
            list-style-type: none;
            padding: 8px;
            margin-top: 10px;
            min-height: 40px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px dashed rgba(58, 58, 58, 0.35);
            border-radius: 6px;
            flex: 1;
            min-height: 0;
        }
        .list-item {
            padding: 8px 10px;
            margin-bottom: 6px;
            background-color: #FCFEFF;
            border: 1px solid rgba(58, 58, 58, 0.2);
            border-radius: 4px;
            cursor: grab;
            user-select: none;
            font-size: 14px;
            line-height: 1.4;
        }
        .list-item:last-child {
            margin-bottom: 0;
        }
        .list-item:active {
            cursor: grabbing;
        }
        /* SortableJS æœƒè‡ªå‹•æ·»åŠ çš„ classï¼Œç”¨æ–¼æ‹–æ›³æ™‚çš„è¦–è¦ºæ•ˆæœ */
        .sortable-ghost {
            opacity: 0.4;
            background: rgba(100, 149, 237, 0.35);
        }
        .sortable-drag {
            opacity: 1 !important;
        }
        #output-container {
            margin-top: 12px;
            display: none;
        }
        .output-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(58, 58, 58, 0.15);
        }
        
        /* æ¡Œé¢ç«¯å…©æ¬„å¸ƒå±€ */
        @media (min-width: 769px) {
            .qr-container {
                display: block !important; /* åªåœ¨æ¡Œé¢ç«¯é¡¯ç¤º */
            }
        }
        
        /* æ¸¬è©¦ç”¨ï¼šè‡¨æ™‚é¡¯ç¤º QR ç¢¼ï¼ˆå¯ä»¥åˆªé™¤ï¼‰ */
        @media (min-width: 600px) {
            .qr-container {
                display: block !important;
            }
            .main-content {
                display: flex;
                flex-direction: row;
                min-height: calc(100vh - 150px);
                max-height: calc(100vh - 150px);
            }
            .input-section, .sort-section {
                flex: 1;
            }
            textarea {
                min-height: 400px;
            }
            #sortable-list {
                flex: 1;
                min-height: 0;
                max-height: none;
            }
        }
        #copy-button {
            background-color: rgba(0, 90, 135, 0.12);
            color: #005A87;
            border: 1px solid #005A87;
            box-shadow: none;
        }
        #copy-button:hover {
            background-color: rgba(0, 90, 135, 0.2);
            color: #213357;
            border-color: #213357;
        }
        .feedback {
            text-align: center;
            font-weight: bold;
            color: #B35A1E;
            margin-top: 8px;
            height: 18px;
            font-size: 13px;
        }
        .qr-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            text-align: center;
            padding: 12px;
            background-color: #FFFFFF;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none; /* é è¨­éš±è—ï¼Œåªåœ¨æ¡Œé¢ç«¯é¡¯ç¤º */
        }
        .qr-container p {
            margin: 0 0 8px 0;
            font-size: 11px;
            color: #808080;
            font-weight: 500;
        }
        #qrcode {
            display: inline-block;
        }
        #qrcode canvas {
            display: block;
        }
        
        /* RWD éŸ¿æ‡‰å¼è¨­è¨ˆ - å¹³æ¿å’Œæ‰‹æ©Ÿå–®æ¬„å¸ƒå±€ */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            .container {
                padding: 12px;
                max-width: 100%;
            }
            .main-content {
                flex-direction: column;
                gap: 15px;
                min-height: auto;
                max-height: none;
            }
            .input-section, .sort-section {
                display: flex;
                flex-direction: column;
            }
            .input-wrapper {
                flex: none;
            }
            h1 {
                font-size: 1.3em;
            }
            h2 {
                font-size: 1em;
            }
            textarea {
                flex: none;
                min-height: 180px;
                height: 180px;
                font-size: 13px;
            }
            #sortable-list {
                flex: none;
            }
            button {
                padding: 10px;
                font-size: 14px;
            }
            .list-item {
                padding: 10px;
                font-size: 13px;
            }
            #sortable-list {
                max-height: 300px;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.2em;
            }
            h2 {
                font-size: 0.95em;
            }
            textarea {
                flex: none;
                min-height: 120px;
                height: 120px;
                font-size: 12px;
            }
            button {
                padding: 9px;
                font-size: 13px;
            }
            .list-item {
                padding: 8px;
                font-size: 12px;
            }
            #sortable-list {
                max-height: 200px;
            }
        }
        
        /* ç¢ºä¿åœ¨å°å±å¹•ä¸Šä¹Ÿèƒ½çœ‹åˆ°ä¸»è¦åŠŸèƒ½ */
        @media (max-height: 600px) {
            #sortable-list {
                max-height: 150px;
            }
        }
    </style>
</head>
<body>

    <div class="qr-container">
        <p>ğŸ“± æ‰‹æ©Ÿæƒç¢¼</p>
        <div id="qrcode"></div>
    </div>

    <div class="container">
        <h1>æ–‡å­—æ‹–æ›³æ’åºå·¥å…·</h1>

        <div class="main-content">
            <div class="input-section">
                <h2>1. è²¼ä¸Šä½ çš„æ–‡å­—</h2>
                <div class="input-wrapper">
                    <textarea id="text-input" placeholder="åœ¨é€™è£¡è²¼ä¸Šä½ çš„æ–‡å­—ï¼Œæ¯å€‹é …ç›®ä½”ä¸€è¡Œ..."></textarea>
                    <button id="generate-list-button">ç”Ÿæˆå¯æ‹–æ›³åˆ—è¡¨</button>
                </div>
            </div>

            <div class="sort-section">
                <h2>2. æ‹–æ›³ä»¥æ’åº</h2>
                <ul id="sortable-list"></ul>
                
                <div id="output-container" class="output-section">
                    <h2>3. è¤‡è£½çµæœ</h2>
                    <button id="copy-button">ä¸€éµè¤‡è£½æ’åºå¾Œçš„æ–‡å­—</button>
                    <div id="feedback-message" class="feedback"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç”Ÿæˆç•¶å‰é é¢çš„ QR ç¢¼
        (function() {
            const currentUrl = window.location.href;
            const qrContainer = document.getElementById('qrcode');
            
            if (qrContainer) {
                // ä½¿ç”¨ QR Server API ç”Ÿæˆ QR ç¢¼åœ–ç‰‡
                const qrImage = document.createElement('img');
                // å¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œä½¿ç”¨å®Œæ•´è·¯å¾‘ï¼›å¦å‰‡ä½¿ç”¨ç•¶å‰ URL
                const qrData = currentUrl.startsWith('file://') ? currentUrl : currentUrl;
                qrImage.src = 'https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=' + encodeURIComponent(qrData);
                qrImage.alt = 'QR Code';
                qrImage.style.display = 'block';
                qrImage.style.margin = '0 auto';
                qrImage.onerror = function() {
                    console.error('QR ç¢¼åœ–ç‰‡è¼‰å…¥å¤±æ•—');
                    qrContainer.innerHTML = '<p style="color: #808080; font-size: 11px;">QR ç¢¼è¼‰å…¥å¤±æ•—<br>è«‹æª¢æŸ¥ç¶²è·¯é€£ç·š</p>';
                };
                qrContainer.appendChild(qrImage);
                
                // èª¿è©¦ç”¨ï¼šåœ¨æ§åˆ¶å°é¡¯ç¤ºç•¶å‰ URL
                console.log('QR ç¢¼ URL:', currentUrl);
            }
        })();

        const textInput = document.getElementById('text-input');
        const generateListButton = document.getElementById('generate-list-button');
        const sortableList = document.getElementById('sortable-list');
        const outputContainer = document.getElementById('output-container');
        const copyButton = document.getElementById('copy-button');
        const feedbackMessage = document.getElementById('feedback-message');

        // æ­¥é©Ÿ 1: é»æ“ŠæŒ‰éˆ•ï¼Œç”Ÿæˆåˆ—è¡¨
        generateListButton.addEventListener('click', () => {
            const text = textInput.value.trim();
            if (!text) {
                alert('è«‹å…ˆè²¼ä¸Šæ–‡å­—ï¼');
                return;
            }

            // æ¸…ç©ºèˆŠåˆ—è¡¨
            sortableList.innerHTML = '';

            // å°‡æ–‡å­—æŒ‰è¡Œåˆ†å‰²ï¼Œéæ¿¾æ‰ç©ºè¡Œ
            const items = text.split('\n').filter(line => line.trim() !== '');

            // ç‚ºæ¯å€‹é …ç›®å‰µå»ºä¸€å€‹åˆ—è¡¨å…ƒç´ 
            items.forEach(itemText => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.textContent = itemText.trim();
                sortableList.appendChild(li);
            });

            // é¡¯ç¤ºæ’åºå’Œè¤‡è£½å€åŸŸ
            outputContainer.style.display = 'block';
            feedbackMessage.textContent = ''; // æ¸…é™¤èˆŠçš„æç¤ºè¨Šæ¯
        });

        // æ­¥é©Ÿ 2: åˆå§‹åŒ– SortableJSï¼Œè®“åˆ—è¡¨å¯æ‹–æ›³
        new Sortable(sortableList, {
            animation: 150, // æ‹–æ›³å‹•ç•«çš„æ¯«ç§’æ•¸
            ghostClass: 'sortable-ghost' // æ‹–æ›³æ™‚ä½”ä½ç¬¦çš„ CSS class
        });

        // æ­¥é©Ÿ 3: é»æ“ŠæŒ‰éˆ•ï¼Œè¤‡è£½çµæœ
        copyButton.addEventListener('click', () => {
            const listItems = sortableList.querySelectorAll('.list-item');
            if (listItems.length === 0) {
                alert('åˆ—è¡¨ä¸­æ²’æœ‰é …ç›®å¯ä»¥è¤‡è£½ï¼');
                return;
            }

            // å¾æ’åºå¥½çš„åˆ—è¡¨ä¸­æå–æ–‡å­—ï¼Œä¸¦ç”¨æ›è¡Œç¬¦çµ„åˆ
            const sortedText = Array.from(listItems)
                                  .map(li => li.textContent)
                                  .join('\n');

            // ä½¿ç”¨ Clipboard API è¤‡è£½åˆ°å‰ªè²¼ç°¿
            navigator.clipboard.writeText(sortedText).then(() => {
                // é¡¯ç¤ºæˆåŠŸæç¤º
                feedbackMessage.textContent = 'æˆåŠŸè¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼';
                // 2ç§’å¾Œè‡ªå‹•æ¸…é™¤æç¤º
                setTimeout(() => {
                    feedbackMessage.textContent = '';
                }, 2000);
            }).catch(err => {
                console.error('è¤‡è£½å¤±æ•—: ', err);
                feedbackMessage.textContent = 'è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ã€‚';
            });
        });
    </script>

</body>
</html>
